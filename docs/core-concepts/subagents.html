<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-core-concepts/subagents" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Subagents（子代理） | Claude Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://luuman.github.io/claude-doc/docs/core-concepts/subagents"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Subagents（子代理） | Claude Docs"><meta data-rh="true" name="description" content="Subagents 是可以并行处理任务的独立 AI 代理，每个子代理拥有独立的 200K 上下文窗口，显著提升复杂任务的处理效率"><meta data-rh="true" property="og:description" content="Subagents 是可以并行处理任务的独立 AI 代理，每个子代理拥有独立的 200K 上下文窗口，显著提升复杂任务的处理效率"><link data-rh="true" rel="icon" href="/claude-doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://luuman.github.io/claude-doc/docs/core-concepts/subagents"><link data-rh="true" rel="alternate" href="https://luuman.github.io/claude-doc/docs/core-concepts/subagents" hreflang="zh"><link data-rh="true" rel="alternate" href="https://luuman.github.io/claude-doc/docs/core-concepts/subagents" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Subagents（子代理）","item":"https://luuman.github.io/claude-doc/docs/core-concepts/subagents"}]}</script><link rel="alternate" type="application/rss+xml" href="/claude-doc/blog/rss.xml" title="Claude Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/claude-doc/blog/atom.xml" title="Claude Docs Atom Feed"><link rel="stylesheet" href="/claude-doc/assets/css/styles.b961a2e4.css">
<script src="/claude-doc/assets/js/runtime~main.b2563310.js" defer="defer"></script>
<script src="/claude-doc/assets/js/main.906b66fd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"dark"),document.documentElement.setAttribute("data-theme-choice",t||"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbar_MONK" role="navigation" aria-label="Main"><div class="navbarInner_ASTH"><div class="navbarLeft_pUmY"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="brand_SXL9" href="/claude-doc/"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="6" fill="var(--ifm-color-primary)"></rect><path d="M7 8.5h10M7 12h7M7 15.5h10" stroke="white" stroke-width="1.8" stroke-linecap="round"></path></svg><span class="brandTitle_XbyU">Claude</span></a><div class="dropdown_GrgZ"><button class="dropdownToggle_Nf_z">全部站点<svg class="dropdownArrow_Eka8" viewBox="0 0 12 12" fill="none"><path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><ul class="dropdownMenu_zsxH"><li><a href="https://luuman.github.io/docs-workspace/docs" class="dropdownMenuItem_VBaP">Workspace</a></li><li><a href="https://luuman.github.io/moltbot-doc/docs" class="dropdownMenuItem_VBaP">Moltbot</a></li><li><a href="https://luuman.github.io/electron-doc/docs" class="dropdownMenuItem_VBaP">Electron</a></li><li><a href="https://luuman.github.io/tauri-doc/docs" class="dropdownMenuItem_VBaP">Tauri</a></li><li><a href="https://luuman.github.io/matrx-doc/docs" class="dropdownMenuItem_VBaP">Matrx</a></li><li><a href="https://luuman.github.io/brainboard-doc/docs" class="dropdownMenuItem_VBaP">Brainboard</a></li><li><a href="https://luuman.github.io/synology-doc/docs" class="dropdownMenuItem_VBaP">Synology</a></li><li><a href="https://luuman.github.io/codex-doc/docs" class="dropdownMenuItem_VBaP">Codex</a></li><li><a href="https://luuman.github.io/ai-doc/docs" class="dropdownMenuItem_VBaP">AI</a></li></ul></div></div><div class="navbarCenter_Zdr3"><div class="root_OF3s"><span class="icon_UcOK" aria-hidden="true"><svg viewBox="0 0 24 24" fill="currentColor" width="15" height="15"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></span><div class="slot__FGx"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div class="navbarRight_q16u"><a class="navLink_RnnM" href="/claude-doc/docs">Docs</a><a class="navLink_RnnM" href="/claude-doc/blog">Blog</a><button class="themeToggle_zD_x" aria-label="Switch to light theme" title="Light"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg></button></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/claude-doc/docs"><span title="Claude Code 完全指南" class="linkLabel_WmDU">Claude Code 完全指南</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/claude-doc/docs/getting-started"><span title="快速开始" class="linkLabel_WmDU">快速开始</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/claude-doc/docs/core-concepts/skills"><span title="核心概念" class="categoryLinkLabel_W154">核心概念</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/core-concepts/skills"><span title="Skills（技能包）" class="linkLabel_WmDU">Skills（技能包）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/core-concepts/hooks"><span title="Hooks（钩子）" class="linkLabel_WmDU">Hooks（钩子）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/core-concepts/plugins"><span title="Plugins（插件）" class="linkLabel_WmDU">Plugins（插件）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/core-concepts/mcp-servers"><span title="MCP Servers（模型上下文协议）" class="linkLabel_WmDU">MCP Servers（模型上下文协议）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/claude-doc/docs/core-concepts/subagents"><span title="Subagents（子代理）" class="linkLabel_WmDU">Subagents（子代理）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/core-concepts/claude-md"><span title="CLAUDE.md（项目记忆文件）" class="linkLabel_WmDU">CLAUDE.md（项目记忆文件）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/core-concepts/memory"><span title="Memory（自动记忆）" class="linkLabel_WmDU">Memory（自动记忆）</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/claude-doc/docs/advanced-features/plan-mode"><span title="高级功能" class="categoryLinkLabel_W154">高级功能</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/advanced-features/plan-mode"><span title="Plan 模式（规划模式）" class="linkLabel_WmDU">Plan 模式（规划模式）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/advanced-features/headless-mode"><span title="Headless 模式（无头模式）" class="linkLabel_WmDU">Headless 模式（无头模式）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/advanced-features/slash-commands"><span title="自定义斜杠命令" class="linkLabel_WmDU">自定义斜杠命令</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/advanced-features/agent-sdk"><span title="Claude Agent SDK" class="linkLabel_WmDU">Claude Agent SDK</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/advanced-features/ide-integration"><span title="IDE 集成" class="linkLabel_WmDU">IDE 集成</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/advanced-features/vibecraft"><span title="VibeCraft — Claude Code 3D 可视化" class="linkLabel_WmDU">VibeCraft — Claude Code 3D 可视化</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/claude-doc/docs/best-practices/workflow"><span title="最佳实践" class="categoryLinkLabel_W154">最佳实践</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/best-practices/workflow"><span title="工作流最佳实践" class="linkLabel_WmDU">工作流最佳实践</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/best-practices/performance"><span title="性能优化" class="linkLabel_WmDU">性能优化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/best-practices/security"><span title="安全与故障排查" class="linkLabel_WmDU">安全与故障排查</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/claude-doc/docs/category/真实场景案例库"><span title="真实场景案例库" class="categoryLinkLabel_W154">真实场景案例库</span></a><button aria-label="折叠侧边栏分类 &#x27;真实场景案例库&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases"><span title="真实场景案例库" class="linkLabel_WmDU">真实场景案例库</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/frontend-acceleration"><span title="React 项目加速" class="linkLabel_WmDU">React 项目加速</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/ui-components"><span title="UI 组件库自动化" class="linkLabel_WmDU">UI 组件库自动化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/backend-api"><span title="API 快速开发" class="linkLabel_WmDU">API 快速开发</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/database-migration"><span title="数据库迁移和优化" class="linkLabel_WmDU">数据库迁移和优化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/cicd-automation"><span title="CI/CD 流程自动化" class="linkLabel_WmDU">CI/CD 流程自动化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/infrastructure-as-code"><span title="基础设施即代码（IaC）" class="linkLabel_WmDU">基础设施即代码（IaC）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/api-documentation"><span title="API 文档自动化" class="linkLabel_WmDU">API 文档自动化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/technical-writing"><span title="技术文档写作" class="linkLabel_WmDU">技术文档写作</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/code-review"><span title="代码审查自动化" class="linkLabel_WmDU">代码审查自动化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/knowledge-base"><span title="知识库维护" class="linkLabel_WmDU">知识库维护</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/claude-doc/docs/quick-reference"><span title="速查手册" class="linkLabel_WmDU">速查手册</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/claude-doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">核心概念</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Subagents（子代理）</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Subagents（子代理）</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="什么是-subagents">什么是 Subagents<a href="#什么是-subagents" class="hash-link" aria-label="什么是 Subagents的直接链接" title="什么是 Subagents的直接链接" translate="no">​</a></h2>
<p>Subagents（子代理）是 Claude Code 的并行处理机制。当遇到可以分解的复杂任务时，主代理可以派生出多个独立的子代理，各自处理不同的子任务，最终汇总结果。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="核心特性">核心特性<a href="#核心特性" class="hash-link" aria-label="核心特性的直接链接" title="核心特性的直接链接" translate="no">​</a></h3>
<ul>
<li class=""><strong>独立上下文</strong>：每个子代理拥有独立的 <strong>200K Token 上下文窗口</strong>，不与主代理共享</li>
<li class=""><strong>并行执行</strong>：多个子代理可以同时运行，大幅缩短任务完成时间</li>
<li class=""><strong>专业化分工</strong>：每个子代理可以配置特定的角色、权限和工具集</li>
<li class=""><strong>结果聚合</strong>：主代理收集所有子代理的输出，进行整合和后续处理</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>为什么需要子代理？</div><div class="admonitionContent_BuS1"><p>大型代码库的重构任务可能需要同时审查代码质量、编写测试、更新文档。如果串行执行，每项任务都要等待前一项完成；使用子代理可以并行完成，效率提升数倍。</p></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="配置子代理">配置子代理<a href="#配置子代理" class="hash-link" aria-label="配置子代理的直接链接" title="配置子代理的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="方式一交互式配置">方式一：交互式配置<a href="#方式一交互式配置" class="hash-link" aria-label="方式一：交互式配置的直接链接" title="方式一：交互式配置的直接链接" translate="no">​</a></h3>
<p>在 Claude Code 中运行：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">/agents</span><br></span></code></pre></div></div>
<p>这会打开子代理管理界面，可以创建、编辑和删除子代理配置。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="方式二配置文件">方式二：配置文件<a href="#方式二配置文件" class="hash-link" aria-label="方式二：配置文件的直接链接" title="方式二：配置文件的直接链接" translate="no">​</a></h3>
<p><strong>全局子代理</strong>（<code>~/.claude/agents.json</code>）在所有项目中可用：</p>
<p><strong>项目级子代理</strong>（<code>.claude/agents.json</code>）仅在当前项目中可用，优先级高于全局配置：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  </span><span class="token property" style="color:#F78C6C">&quot;agents&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;name&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;code-reviewer&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;displayName&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;代码审查专家&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;description&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;专注于代码质量、安全性和可维护性审查&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;model&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;claude-opus-4-6&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;systemPrompt&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;你是一位资深软件工程师，专注于代码审查。你的职责是：\n1. 识别代码中的 Bug 和潜在问题\n2. 评估代码的可读性和可维护性\n3. 检查安全漏洞（SQL 注入、XSS、CSRF 等）\n4. 提供具体的改进建议（附带代码示例）\n5. 评分（1-10分）并给出总体评价\n\n审查时请保持严格但建设性的态度，每个问题都要说明原因和影响。&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;tools&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token string" style="color:#ECC48D">&quot;Read&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token string" style="color:#ECC48D">&quot;Grep&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token string" style="color:#ECC48D">&quot;Glob&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;maxTokens&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token number" style="color:#F78C6C">8192</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;temperature&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token number" style="color:#F78C6C">0.3</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;contextWindow&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token number" style="color:#F78C6C">200000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;name&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;test-writer&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;displayName&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;测试用例编写专家&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;description&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;为代码生成全面的单元测试和集成测试&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;model&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;claude-opus-4-6&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;systemPrompt&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;你是一位测试工程师专家，擅长编写高质量的自动化测试。你的职责是：\n1. 分析被测代码的功能和边界条件\n2. 编写覆盖率高的单元测试（目标 &gt;90%）\n3. 设计集成测试场景\n4. 包含正常路径、异常路径、边界值测试\n5. 使用项目已有的测试框架（Jest/Pytest/JUnit 等）\n\n测试应该清晰、独立且可重复执行。&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;tools&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token string" style="color:#ECC48D">&quot;Read&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token string" style="color:#ECC48D">&quot;Write&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token string" style="color:#ECC48D">&quot;Glob&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token string" style="color:#ECC48D">&quot;Grep&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token string" style="color:#ECC48D">&quot;Bash&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;maxTokens&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token number" style="color:#F78C6C">16384</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;temperature&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token number" style="color:#F78C6C">0.2</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;contextWindow&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token number" style="color:#F78C6C">200000</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;workingDirectory&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;${PROJECT_ROOT}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;name&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;doc-generator&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;displayName&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;文档生成专家&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;description&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;自动生成 API 文档、使用指南和架构说明&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;model&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;claude-opus-4-6&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;systemPrompt&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;你是一位技术文档专家，擅长将复杂的技术概念转化为清晰的文档。你的职责是：\n1. 生成完整的 API 文档（包含参数、返回值、示例）\n2. 编写用户使用指南\n3. 创建架构说明文档\n4. 保持文档与代码同步\n5. 使用 Markdown 格式，结构清晰\n\n文档应面向目标读者，技术细节准确，示例代码可运行。&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;tools&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token string" style="color:#ECC48D">&quot;Read&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token string" style="color:#ECC48D">&quot;Write&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token string" style="color:#ECC48D">&quot;Glob&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token string" style="color:#ECC48D">&quot;Grep&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;maxTokens&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token number" style="color:#F78C6C">16384</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;temperature&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token number" style="color:#F78C6C">0.4</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token property" style="color:#F78C6C">&quot;contextWindow&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token number" style="color:#F78C6C">200000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  </span><span class="token property" style="color:#F78C6C">&quot;defaults&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token property" style="color:#F78C6C">&quot;model&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;claude-opus-4-6&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token property" style="color:#F78C6C">&quot;maxTokens&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token number" style="color:#F78C6C">8192</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token property" style="color:#F78C6C">&quot;temperature&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token number" style="color:#F78C6C">0.3</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token property" style="color:#F78C6C">&quot;contextWindow&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token number" style="color:#F78C6C">200000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token punctuation" style="color:#C792EA">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="配置字段说明">配置字段说明<a href="#配置字段说明" class="hash-link" aria-label="配置字段说明的直接链接" title="配置字段说明的直接链接" translate="no">​</a></h3>







































































<table><thead><tr><th>字段</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>是</td><td>子代理唯一标识符</td></tr><tr><td><code>displayName</code></td><td>string</td><td>否</td><td>显示名称</td></tr><tr><td><code>description</code></td><td>string</td><td>是</td><td>子代理的职责描述</td></tr><tr><td><code>model</code></td><td>string</td><td>否</td><td>使用的模型（默认继承主代理）</td></tr><tr><td><code>systemPrompt</code></td><td>string</td><td>是</td><td>子代理的系统提示词，定义其角色和行为</td></tr><tr><td><code>tools</code></td><td>array</td><td>否</td><td>允许使用的工具列表</td></tr><tr><td><code>maxTokens</code></td><td>number</td><td>否</td><td>单次响应最大 Token 数</td></tr><tr><td><code>temperature</code></td><td>number</td><td>否</td><td>生成温度（0-1，越低越确定）</td></tr><tr><td><code>contextWindow</code></td><td>number</td><td>否</td><td>上下文窗口大小（最大 200000）</td></tr><tr><td><code>workingDirectory</code></td><td>string</td><td>否</td><td>子代理的工作目录</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="使用子代理">使用子代理<a href="#使用子代理" class="hash-link" aria-label="使用子代理的直接链接" title="使用子代理的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="并行代码审查示例">并行代码审查示例<a href="#并行代码审查示例" class="hash-link" aria-label="并行代码审查示例的直接链接" title="并行代码审查示例的直接链接" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">请使用三个子代理并行处理这次重构：</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">1. code-reviewer 子代理：审查 src/ 目录下所有修改的文件</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">2. test-writer 子代理：为修改的函数生成测试用例</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">3. doc-generator 子代理：更新受影响的 API 文档</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">完成后汇总三个子代理的结果，给出完整的重构报告。</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="大型代码库分析示例">大型代码库分析示例<a href="#大型代码库分析示例" class="hash-link" aria-label="大型代码库分析示例的直接链接" title="大型代码库分析示例的直接链接" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">使用多个子代理并行分析这个大型项目：</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 子代理1：分析 frontend/ 目录的代码质量</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 子代理2：分析 backend/ 目录的代码质量</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 子代理3：分析 database/ 目录的 Schema 设计</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 子代理4：检查整体的安全配置</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">每个子代理独立使用其 200K 上下文窗口，最后生成综合报告。</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="实战子代理案例">实战子代理案例<a href="#实战子代理案例" class="hash-link" aria-label="实战子代理案例的直接链接" title="实战子代理案例的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="案例一代码精简专家">案例一：代码精简专家<a href="#案例一代码精简专家" class="hash-link" aria-label="案例一：代码精简专家的直接链接" title="案例一：代码精简专家的直接链接" translate="no">​</a></h3>
<p>创建 <code>.claude/agents/code-simplifier.md</code>：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block punctuation" style="color:#C792EA">---</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#C792EA">name</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">:</span><span class="token front-matter-block front-matter yaml language-yaml"> code</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml">simplifier</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#C792EA">description</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">:</span><span class="token front-matter-block front-matter yaml language-yaml"> 代码精简专家，负责识别并消除代码中的冗余，提升代码简洁度</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#C792EA">tools</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">:</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml"> Read</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml"> Edit</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml"> Glob</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml"> Grep</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#C792EA">model</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">:</span><span class="token front-matter-block front-matter yaml language-yaml"> claude</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml">opus</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml">4</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml number" style="color:#F78C6C">6</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#C792EA">temperature</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml number" style="color:#F78C6C">0.2</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style="color:#C792EA">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">#</span><span class="token title important" style="color:#D6DEEB"> 代码精简专家</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">##</span><span class="token title important" style="color:#D6DEEB"> 角色定义</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">你是一位代码优化专家，专注于在保持功能不变的前提下，使代码更简洁、更易读。</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">##</span><span class="token title important" style="color:#D6DEEB"> 精简原则</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">###</span><span class="token title important" style="color:#D6DEEB"> 1. 消除冗余</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 合并重复的条件判断</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 提取公共代码到函数/方法</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 删除死代码和未使用的导入</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 简化复杂的嵌套结构</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">###</span><span class="token title important" style="color:#D6DEEB"> 2. 使用语言特性</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 使用解构赋值替代多行赋值</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 使用可选链（</span><span class="token code-snippet code keyword" style="color:#C792EA">`?.`</span><span class="token plain">）替代冗长的空值检查</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 使用数组方法（map/filter/reduce）替代命令式循环</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 使用模板字符串替代字符串拼接</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">###</span><span class="token title important" style="color:#D6DEEB"> 3. 命名优化</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 使用描述性的变量名</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 避免单字母变量名（除循环索引外）</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 使用动词开头的函数名</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">##</span><span class="token title important" style="color:#D6DEEB"> 工作流程</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">1.</span><span class="token plain"> 读取目标文件</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">2.</span><span class="token plain"> 识别可精简的代码模式</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">3.</span><span class="token plain"> 逐一重构，每次修改只做一件事</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">4.</span><span class="token plain"> 确认功能等价性</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">5.</span><span class="token plain"> 输出精简报告（变更内容、预期效果）</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">##</span><span class="token title important" style="color:#D6DEEB"> 输出格式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">对每个修改提供：</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 原始代码片段</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 精简后的代码片段</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 改动说明</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 复杂度降低估算</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="案例二应用验证专家">案例二：应用验证专家<a href="#案例二应用验证专家" class="hash-link" aria-label="案例二：应用验证专家的直接链接" title="案例二：应用验证专家的直接链接" translate="no">​</a></h3>
<p>创建 <code>.claude/agents/verify-app.md</code>：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block punctuation" style="color:#C792EA">---</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#C792EA">name</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">:</span><span class="token front-matter-block front-matter yaml language-yaml"> verify</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml">app</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#C792EA">description</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">:</span><span class="token front-matter-block front-matter yaml language-yaml"> 应用验证专家，通过多维度检查确保应用的正确性和稳定性</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#C792EA">tools</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">:</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml"> Read</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml"> Bash</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml"> Glob</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml"> Grep</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#C792EA">model</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">:</span><span class="token front-matter-block front-matter yaml language-yaml"> claude</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml">opus</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml">4</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">-</span><span class="token front-matter-block front-matter yaml language-yaml number" style="color:#F78C6C">6</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#C792EA">temperature</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#C792EA">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml number" style="color:#F78C6C">0.1</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style="color:#C792EA">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">#</span><span class="token title important" style="color:#D6DEEB"> 应用验证专家</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">##</span><span class="token title important" style="color:#D6DEEB"> 角色定义</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">你是一位质量保障专家，负责对应用进行全面的验证和检查，确保其在发布前达到质量标准。</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">##</span><span class="token title important" style="color:#D6DEEB"> 验证维度</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">###</span><span class="token title important" style="color:#D6DEEB"> 1. 功能验证</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 运行现有测试套件，确认全部通过</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 验证核心业务逻辑的正确性</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token list punctuation" style="color:#C792EA">-</span><span class="token plain"> 检查边界条件和异常处理</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">###</span><span class="token title important" style="color:#D6DEEB"> 2. 构建验证</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">```bash</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">#</span><span class="token title important" style="color:#D6DEEB"> 清理并重新构建</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">npm run clean &amp;&amp; npm run build</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token title important punctuation" style="color:#C792EA">#</span><span class="token title important" style="color:#D6DEEB"> 检查构建产物</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">ls -la dist/</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-依赖安全检查">3. 依赖安全检查<a href="#3-依赖安全检查" class="hash-link" aria-label="3. 依赖安全检查的直接链接" title="3. 依赖安全检查的直接链接" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 检查已知漏洞</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">npm audit</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 检查过时的依赖</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">npm outdated</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-代码质量检查">4. 代码质量检查<a href="#4-代码质量检查" class="hash-link" aria-label="4. 代码质量检查的直接链接" title="4. 代码质量检查的直接链接" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 运行 Lint</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">npm run lint</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 类型检查（TypeScript 项目）</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">npm run type-check</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-性能基准">5. 性能基准<a href="#5-性能基准" class="hash-link" aria-label="5. 性能基准的直接链接" title="5. 性能基准的直接链接" translate="no">​</a></h3>
<ul>
<li class="">检查关键路径的响应时间</li>
<li class="">验证内存使用是否在合理范围</li>
<li class="">确认没有明显的性能回归</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="验证报告格式">验证报告格式<a href="#验证报告格式" class="hash-link" aria-label="验证报告格式的直接链接" title="验证报告格式的直接链接" translate="no">​</a></h2>
<p>验证完成后输出结构化报告：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">## 应用验证报告</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">### 验证摘要</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 验证时间：[时间戳]</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 总体状态：✅ 通过 / ❌ 失败 / ⚠️ 警告</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">### 功能测试</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 测试通过率：XX/XX (XX%)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 失败用例：[列表]</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">### 构建状态</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 构建结果：成功/失败</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 构建产物大小：XX MB</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">### 安全检查</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 高危漏洞：X 个</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 中危漏洞：X 个</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 需要更新的依赖：[列表]</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">### 代码质量</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- Lint 错误：X 个</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- Lint 警告：X 个</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">- 类型错误：X 个</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">### 建议</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">[优先级排序的改进建议]</span><br></span></code></pre></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">---</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">## 子代理最佳实践</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">:::tip[设计建议]</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">1. **单一职责**：每个子代理专注于一个明确的职责领域</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">2. **精确工具授权**：只给子代理配置其实际需要的工具，遵循最小权限原则</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">3. **详细系统提示**：子代理的 `systemPrompt` 越具体，执行质量越高</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">4. **温度调节**：分析类任务使用低温度（0.1-0.3），创作类任务可适当提高</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">5. **并行任务设计**：设计任务时确保子任务之间相互独立，避免数据依赖导致等待</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">:::warning[资源消耗提示]</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">每个子代理消耗独立的 API 调用和 Token。同时运行多个子代理会成倍增加 Token 消耗，请根据实际需求合理使用并行子代理数量。</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">---</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">## 子代理 vs 主代理</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">| 特性 | 主代理 | 子代理 |</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">|------|-------|-------|</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">| 上下文窗口 | 与会话共享 | 独立 200K |</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">| 执行方式 | 串行 | 可并行 |</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">| 工具访问 | 全部工具 | 可限制 |</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">| 生命周期 | 整个会话 | 任务期间 |</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">| 配置方式 | 系统设置 | agents.json |</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">| 适用场景 | 复杂对话 | 特定子任务 |</span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/claude-doc/docs/core-concepts/mcp-servers"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">MCP Servers（模型上下文协议）</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/claude-doc/docs/core-concepts/claude-md"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">CLAUDE.md（项目记忆文件）</div></a></nav></div></div><div class="col col--3"><div class="tocWrapper_xKoj"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#什么是-subagents" class="table-of-contents__link toc-highlight">什么是 Subagents</a><ul><li><a href="#核心特性" class="table-of-contents__link toc-highlight">核心特性</a></li></ul></li><li><a href="#配置子代理" class="table-of-contents__link toc-highlight">配置子代理</a><ul><li><a href="#方式一交互式配置" class="table-of-contents__link toc-highlight">方式一：交互式配置</a></li><li><a href="#方式二配置文件" class="table-of-contents__link toc-highlight">方式二：配置文件</a></li><li><a href="#配置字段说明" class="table-of-contents__link toc-highlight">配置字段说明</a></li></ul></li><li><a href="#使用子代理" class="table-of-contents__link toc-highlight">使用子代理</a><ul><li><a href="#并行代码审查示例" class="table-of-contents__link toc-highlight">并行代码审查示例</a></li><li><a href="#大型代码库分析示例" class="table-of-contents__link toc-highlight">大型代码库分析示例</a></li></ul></li><li><a href="#实战子代理案例" class="table-of-contents__link toc-highlight">实战子代理案例</a><ul><li><a href="#案例一代码精简专家" class="table-of-contents__link toc-highlight">案例一：代码精简专家</a></li><li><a href="#案例二应用验证专家" class="table-of-contents__link toc-highlight">案例二：应用验证专家</a></li><li><a href="#3-依赖安全检查" class="table-of-contents__link toc-highlight">3. 依赖安全检查</a></li><li><a href="#4-代码质量检查" class="table-of-contents__link toc-highlight">4. 代码质量检查</a></li><li><a href="#5-性能基准" class="table-of-contents__link toc-highlight">5. 性能基准</a></li></ul></li><li><a href="#验证报告格式" class="table-of-contents__link toc-highlight">验证报告格式</a></li></ul></div><div class="tocFooter_Fu2z"><div class="themeGroup_RzWV" role="group" aria-label="Theme"><button class="themeBtn_tGr6" aria-label="Light theme" title="Light"><svg viewBox="0 0 24 24" width="15" height="15" fill="currentColor" aria-hidden="true"><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg></button><button class="themeBtn_tGr6 themeBtnActive_A6tm" aria-label="Dark theme" title="Dark"><svg viewBox="0 0 24 24" width="15" height="15" fill="currentColor" aria-hidden="true"><path d="M11.38 2.019a7.5 7.5 0 1 0 10.6 10.6C21.83 17.963 17.315 22 12.002 22 6.477 22 2 17.523 2 12c0-5.314 4.038-9.827 9.38-10.28z"></path></svg></button></div></div></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Claude Docs.</div></div></div></footer></div>
</body>
</html>