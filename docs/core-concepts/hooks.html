<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-core-concepts/hooks" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Hooks（钩子） | Claude Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://luuman.github.io/claude-doc/docs/core-concepts/hooks"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Hooks（钩子） | Claude Docs"><meta data-rh="true" name="description" content="Hooks 是在特定事件触发时自动执行的脚本，用于拦截、增强或自动化 Claude Code 的行为"><meta data-rh="true" property="og:description" content="Hooks 是在特定事件触发时自动执行的脚本，用于拦截、增强或自动化 Claude Code 的行为"><link data-rh="true" rel="icon" href="/claude-doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://luuman.github.io/claude-doc/docs/core-concepts/hooks"><link data-rh="true" rel="alternate" href="https://luuman.github.io/claude-doc/docs/core-concepts/hooks" hreflang="zh"><link data-rh="true" rel="alternate" href="https://luuman.github.io/claude-doc/docs/core-concepts/hooks" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Hooks（钩子）","item":"https://luuman.github.io/claude-doc/docs/core-concepts/hooks"}]}</script><link rel="alternate" type="application/rss+xml" href="/claude-doc/blog/rss.xml" title="Claude Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/claude-doc/blog/atom.xml" title="Claude Docs Atom Feed"><link rel="stylesheet" href="/claude-doc/assets/css/styles.b961a2e4.css">
<script src="/claude-doc/assets/js/runtime~main.b2563310.js" defer="defer"></script>
<script src="/claude-doc/assets/js/main.906b66fd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"dark"),document.documentElement.setAttribute("data-theme-choice",t||"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbar_MONK" role="navigation" aria-label="Main"><div class="navbarInner_ASTH"><div class="navbarLeft_pUmY"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="brand_SXL9" href="/claude-doc/"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="6" fill="var(--ifm-color-primary)"></rect><path d="M7 8.5h10M7 12h7M7 15.5h10" stroke="white" stroke-width="1.8" stroke-linecap="round"></path></svg><span class="brandTitle_XbyU">Claude</span></a><div class="dropdown_GrgZ"><button class="dropdownToggle_Nf_z">全部站点<svg class="dropdownArrow_Eka8" viewBox="0 0 12 12" fill="none"><path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><ul class="dropdownMenu_zsxH"><li><a href="https://luuman.github.io/docs-workspace/docs" class="dropdownMenuItem_VBaP">Workspace</a></li><li><a href="https://luuman.github.io/moltbot-doc/docs" class="dropdownMenuItem_VBaP">Moltbot</a></li><li><a href="https://luuman.github.io/electron-doc/docs" class="dropdownMenuItem_VBaP">Electron</a></li><li><a href="https://luuman.github.io/tauri-doc/docs" class="dropdownMenuItem_VBaP">Tauri</a></li><li><a href="https://luuman.github.io/matrx-doc/docs" class="dropdownMenuItem_VBaP">Matrx</a></li><li><a href="https://luuman.github.io/brainboard-doc/docs" class="dropdownMenuItem_VBaP">Brainboard</a></li><li><a href="https://luuman.github.io/synology-doc/docs" class="dropdownMenuItem_VBaP">Synology</a></li><li><a href="https://luuman.github.io/codex-doc/docs" class="dropdownMenuItem_VBaP">Codex</a></li><li><a href="https://luuman.github.io/ai-doc/docs" class="dropdownMenuItem_VBaP">AI</a></li></ul></div></div><div class="navbarCenter_Zdr3"><div class="root_OF3s"><span class="icon_UcOK" aria-hidden="true"><svg viewBox="0 0 24 24" fill="currentColor" width="15" height="15"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></span><div class="slot__FGx"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div class="navbarRight_q16u"><a class="navLink_RnnM" href="/claude-doc/docs">Docs</a><a class="navLink_RnnM" href="/claude-doc/blog">Blog</a><button class="themeToggle_zD_x" aria-label="Switch to light theme" title="Light"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg></button></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/claude-doc/docs"><span title="Claude Code 完全指南" class="linkLabel_WmDU">Claude Code 完全指南</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/claude-doc/docs/getting-started"><span title="快速开始" class="linkLabel_WmDU">快速开始</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/claude-doc/docs/core-concepts/skills"><span title="核心概念" class="categoryLinkLabel_W154">核心概念</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/core-concepts/skills"><span title="Skills（技能包）" class="linkLabel_WmDU">Skills（技能包）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/claude-doc/docs/core-concepts/hooks"><span title="Hooks（钩子）" class="linkLabel_WmDU">Hooks（钩子）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/core-concepts/plugins"><span title="Plugins（插件）" class="linkLabel_WmDU">Plugins（插件）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/core-concepts/mcp-servers"><span title="MCP Servers（模型上下文协议）" class="linkLabel_WmDU">MCP Servers（模型上下文协议）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/core-concepts/subagents"><span title="Subagents（子代理）" class="linkLabel_WmDU">Subagents（子代理）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/core-concepts/claude-md"><span title="CLAUDE.md（项目记忆文件）" class="linkLabel_WmDU">CLAUDE.md（项目记忆文件）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/core-concepts/memory"><span title="Memory（自动记忆）" class="linkLabel_WmDU">Memory（自动记忆）</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/claude-doc/docs/advanced-features/plan-mode"><span title="高级功能" class="categoryLinkLabel_W154">高级功能</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/advanced-features/plan-mode"><span title="Plan 模式（规划模式）" class="linkLabel_WmDU">Plan 模式（规划模式）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/advanced-features/headless-mode"><span title="Headless 模式（无头模式）" class="linkLabel_WmDU">Headless 模式（无头模式）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/advanced-features/slash-commands"><span title="自定义斜杠命令" class="linkLabel_WmDU">自定义斜杠命令</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/advanced-features/agent-sdk"><span title="Claude Agent SDK" class="linkLabel_WmDU">Claude Agent SDK</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/advanced-features/ide-integration"><span title="IDE 集成" class="linkLabel_WmDU">IDE 集成</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/advanced-features/vibecraft"><span title="VibeCraft — Claude Code 3D 可视化" class="linkLabel_WmDU">VibeCraft — Claude Code 3D 可视化</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/claude-doc/docs/best-practices/workflow"><span title="最佳实践" class="categoryLinkLabel_W154">最佳实践</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/best-practices/workflow"><span title="工作流最佳实践" class="linkLabel_WmDU">工作流最佳实践</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/best-practices/performance"><span title="性能优化" class="linkLabel_WmDU">性能优化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/best-practices/security"><span title="安全与故障排查" class="linkLabel_WmDU">安全与故障排查</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/claude-doc/docs/category/真实场景案例库"><span title="真实场景案例库" class="categoryLinkLabel_W154">真实场景案例库</span></a><button aria-label="折叠侧边栏分类 &#x27;真实场景案例库&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases"><span title="真实场景案例库" class="linkLabel_WmDU">真实场景案例库</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/frontend-acceleration"><span title="React 项目加速" class="linkLabel_WmDU">React 项目加速</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/ui-components"><span title="UI 组件库自动化" class="linkLabel_WmDU">UI 组件库自动化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/backend-api"><span title="API 快速开发" class="linkLabel_WmDU">API 快速开发</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/database-migration"><span title="数据库迁移和优化" class="linkLabel_WmDU">数据库迁移和优化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/cicd-automation"><span title="CI/CD 流程自动化" class="linkLabel_WmDU">CI/CD 流程自动化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/infrastructure-as-code"><span title="基础设施即代码（IaC）" class="linkLabel_WmDU">基础设施即代码（IaC）</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/api-documentation"><span title="API 文档自动化" class="linkLabel_WmDU">API 文档自动化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/technical-writing"><span title="技术文档写作" class="linkLabel_WmDU">技术文档写作</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/code-review"><span title="代码审查自动化" class="linkLabel_WmDU">代码审查自动化</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/claude-doc/docs/use-cases/knowledge-base"><span title="知识库维护" class="linkLabel_WmDU">知识库维护</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/claude-doc/docs/quick-reference"><span title="速查手册" class="linkLabel_WmDU">速查手册</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/claude-doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">核心概念</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Hooks（钩子）</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Hooks（钩子）</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="什么是-hooks">什么是 Hooks<a href="#什么是-hooks" class="hash-link" aria-label="什么是 Hooks的直接链接" title="什么是 Hooks的直接链接" translate="no">​</a></h2>
<p>Hooks 是 Claude Code 的事件驱动自动化机制。当特定事件发生时（如用户提交提示词、工具被调用等），Claude Code 会自动执行预配置的脚本。</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>核心价值</div><div class="admonitionContent_BuS1"><p>通过 Hooks，你可以在不修改 Claude Code 源码的情况下，为其添加自定义行为——拦截危险操作、自动格式化代码、记录审计日志、发送通知等。</p></div></div>
<p>Hooks 的典型应用场景：</p>
<ul>
<li class=""><strong>安全防护</strong>：拦截可能危险的命令执行</li>
<li class=""><strong>代码质量</strong>：每次文件修改后自动运行格式化工具</li>
<li class=""><strong>审计合规</strong>：记录所有 AI 操作到日志系统</li>
<li class=""><strong>团队通知</strong>：重要操作完成后发送 Slack/邮件通知</li>
<li class=""><strong>自动测试</strong>：代码变更后自动触发测试套件</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="hook-事件类型">Hook 事件类型<a href="#hook-事件类型" class="hash-link" aria-label="Hook 事件类型的直接链接" title="Hook 事件类型的直接链接" translate="no">​</a></h2>













































<table><thead><tr><th>事件名称</th><th>触发时机</th><th>常见用途</th></tr></thead><tbody><tr><td><code>UserPromptSubmit</code></td><td>用户提交提示词时</td><td>内容过滤、提示词增强</td></tr><tr><td><code>PreToolUse</code></td><td>Claude 即将调用工具前</td><td>危险命令拦截、权限检查</td></tr><tr><td><code>PostToolUse</code></td><td>工具调用完成后</td><td>代码格式化、自动测试</td></tr><tr><td><code>Stop</code></td><td>Claude 完成当前回复时</td><td>自动触发后续任务、记录会话</td></tr><tr><td><code>SubagentStop</code></td><td>子代理完成任务时</td><td>子任务结果汇总、通知</td></tr><tr><td><code>Notification</code></td><td>Claude 发送通知时</td><td>消息转发、桌面通知</td></tr><tr><td><code>SessionStart</code></td><td>会话启动时</td><td>环境准备、上下文预加载</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="配置方式">配置方式<a href="#配置方式" class="hash-link" aria-label="配置方式的直接链接" title="配置方式的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="方式一通过命令配置">方式一：通过命令配置<a href="#方式一通过命令配置" class="hash-link" aria-label="方式一：通过命令配置的直接链接" title="方式一：通过命令配置的直接链接" translate="no">​</a></h3>
<p>在 Claude Code 中运行：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">/hooks</span><br></span></code></pre></div></div>
<p>这会打开交互式 Hook 配置界面，可以添加、编辑或删除 Hooks。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="方式二直接编辑配置文件">方式二：直接编辑配置文件<a href="#方式二直接编辑配置文件" class="hash-link" aria-label="方式二：直接编辑配置文件的直接链接" title="方式二：直接编辑配置文件的直接链接" translate="no">​</a></h3>
<p>编辑 <code>~/.claude/settings.json</code>（全局）或 <code>.claude/settings.json</code>（项目级）：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  </span><span class="token property" style="color:#F78C6C">&quot;hooks&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token property" style="color:#F78C6C">&quot;UserPromptSubmit&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token property" style="color:#F78C6C">&quot;hooks&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">          </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">            </span><span class="token property" style="color:#F78C6C">&quot;type&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;command&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">            </span><span class="token property" style="color:#F78C6C">&quot;command&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;~/.claude/hooks/prompt-filter.sh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">          </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token property" style="color:#F78C6C">&quot;PreToolUse&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token property" style="color:#F78C6C">&quot;matcher&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;Bash&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token property" style="color:#F78C6C">&quot;hooks&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">          </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">            </span><span class="token property" style="color:#F78C6C">&quot;type&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;command&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">            </span><span class="token property" style="color:#F78C6C">&quot;command&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;~/.claude/hooks/safety-check.sh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">          </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token property" style="color:#F78C6C">&quot;PostToolUse&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token property" style="color:#F78C6C">&quot;matcher&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;Write|Edit|MultiEdit&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token property" style="color:#F78C6C">&quot;hooks&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">          </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">            </span><span class="token property" style="color:#F78C6C">&quot;type&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;command&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">            </span><span class="token property" style="color:#F78C6C">&quot;command&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;~/.claude/hooks/post-tool.sh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">          </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token property" style="color:#F78C6C">&quot;SessionStart&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token property" style="color:#F78C6C">&quot;hooks&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">          </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">            </span><span class="token property" style="color:#F78C6C">&quot;type&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;command&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">            </span><span class="token property" style="color:#F78C6C">&quot;command&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;~/.claude/hooks/session-init.sh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">          </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token property" style="color:#F78C6C">&quot;Stop&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token property" style="color:#F78C6C">&quot;hooks&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#C792EA">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">          </span><span class="token punctuation" style="color:#C792EA">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">            </span><span class="token property" style="color:#F78C6C">&quot;type&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;command&quot;</span><span class="token punctuation" style="color:#C792EA">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">            </span><span class="token property" style="color:#F78C6C">&quot;command&quot;</span><span class="token operator" style="color:#7FDBCA">:</span><span class="token plain"> </span><span class="token string" style="color:#ECC48D">&quot;~/.claude/hooks/on-complete.sh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">          </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    </span><span class="token punctuation" style="color:#C792EA">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  </span><span class="token punctuation" style="color:#C792EA">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"></span><span class="token punctuation" style="color:#C792EA">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="配置字段说明">配置字段说明<a href="#配置字段说明" class="hash-link" aria-label="配置字段说明的直接链接" title="配置字段说明的直接链接" translate="no">​</a></h4>

























<table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>matcher</code></td><td>string</td><td>正则表达式，匹配工具名称（如 <code>&quot;Bash&quot;</code>、<code>&quot;Write|Edit&quot;</code>）。不填则匹配所有</td></tr><tr><td><code>type</code></td><td>string</td><td>Hook 类型，目前仅支持 <code>&quot;command&quot;</code></td></tr><tr><td><code>command</code></td><td>string</td><td>要执行的脚本路径（支持 <code>~</code> 展开）</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>退出码决定行为</div><div class="admonitionContent_BuS1"><ul>
<li class=""><strong>PreToolUse</strong>：脚本退出码非零 → 阻止工具调用，Claude 收到错误信息</li>
<li class=""><strong>其他事件</strong>：退出码仅影响错误日志，不阻止操作</li>
</ul></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="hook-脚本接收输入">Hook 脚本接收输入<a href="#hook-脚本接收输入" class="hash-link" aria-label="Hook 脚本接收输入的直接链接" title="Hook 脚本接收输入的直接链接" translate="no">​</a></h4>
<p>Hook 脚本通过 <strong>stdin 接收 JSON 数据</strong>，包含当前上下文信息：</p>

































<table><thead><tr><th>事件</th><th>stdin JSON 内容</th></tr></thead><tbody><tr><td><code>UserPromptSubmit</code></td><td><code>{&quot;prompt&quot;: &quot;用户输入的内容&quot;, &quot;session_id&quot;: &quot;...&quot;}</code></td></tr><tr><td><code>PreToolUse</code></td><td><code>{&quot;tool_name&quot;: &quot;Bash&quot;, &quot;tool_input&quot;: {&quot;command&quot;: &quot;ls&quot;}}</code></td></tr><tr><td><code>PostToolUse</code></td><td><code>{&quot;tool_name&quot;: &quot;Write&quot;, &quot;tool_input&quot;: {...}, &quot;tool_response&quot;: {...}}</code></td></tr><tr><td><code>Stop</code></td><td><code>{&quot;stop_reason&quot;: &quot;end_turn&quot;, &quot;session_id&quot;: &quot;...&quot;}</code></td></tr><tr><td><code>SessionStart</code></td><td><code>{&quot;session_id&quot;: &quot;...&quot;, &quot;cwd&quot;: &quot;/path/to/project&quot;}</code></td></tr><tr><td><code>Notification</code></td><td><code>{&quot;message&quot;: &quot;通知内容&quot;}</code></td></tr></tbody></table>
<p>在脚本中读取 stdin：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 读取 JSON 输入</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">INPUT=$(cat)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">TOOL_NAME=$(echo &quot;$INPUT&quot; | jq -r &#x27;.tool_name // &quot;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">COMMAND=$(echo &quot;$INPUT&quot; | jq -r &#x27;.tool_input.command // &quot;&quot;&#x27;)</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="实战示例">实战示例<a href="#实战示例" class="hash-link" aria-label="实战示例的直接链接" title="实战示例的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="示例一拦截危险命令">示例一：拦截危险命令<a href="#示例一拦截危险命令" class="hash-link" aria-label="示例一：拦截危险命令的直接链接" title="示例一：拦截危险命令的直接链接" translate="no">​</a></h3>
<p>创建 <code>~/.claude/hooks/safety-check.sh</code>，在工具调用前检查是否包含危险操作：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># safety-check.sh - 拦截危险命令的 PreToolUse Hook</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 读取 stdin JSON 输入</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">INPUT=$(cat)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">TOOL_NAME=$(echo &quot;$INPUT&quot; | jq -r &#x27;.tool_name // &quot;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">COMMAND=$(echo &quot;$INPUT&quot; | jq -r &#x27;.tool_input.command // &quot;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 只对 Bash 工具进行检查（也可以在 matcher 中直接过滤）</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">if [[ &quot;$TOOL_NAME&quot; != &quot;Bash&quot; ]]; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  exit 0</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 定义危险命令关键词</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">DANGEROUS_COMMANDS=(</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  &quot;rm -rf /&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  &quot;rm -rf ~&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  &quot;dd if=&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  &quot;mkfs&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  &quot;&gt; /dev/sda&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  &quot;chmod 777 /&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  &quot;sudo rm -rf&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  &quot;DROP DATABASE&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 检查命令内容</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">for pattern in &quot;${DANGEROUS_COMMANDS[@]}&quot;; do</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  if echo &quot;$COMMAND&quot; | grep -qi &quot;$pattern&quot;; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    echo &quot;⚠️  安全检查失败：检测到危险命令模式 &#x27;$pattern&#x27;&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    echo &quot;操作已被 Hook 拦截。如需执行，请手动在终端中运行。&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    # 记录到审计日志</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    mkdir -p ~/.claude/logs</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    echo &quot;[$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)] 拦截危险命令: $pattern | 命令: $COMMAND&quot; \</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      &gt;&gt; ~/.claude/logs/security-audit.log</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    exit 1  # 非零退出码阻止工具执行</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">done</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">exit 0  # 零退出码：检查通过，允许继续</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 赋予执行权限</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">chmod +x ~/.claude/hooks/safety-check.sh</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="示例二自动格式化代码posttooluse-hook">示例二：自动格式化代码（PostToolUse Hook）<a href="#示例二自动格式化代码posttooluse-hook" class="hash-link" aria-label="示例二：自动格式化代码（PostToolUse Hook）的直接链接" title="示例二：自动格式化代码（PostToolUse Hook）的直接链接" translate="no">​</a></h3>
<p>每次 Claude Code 修改文件后，自动运行相应的格式化工具：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># post-tool.sh - 自动格式化代码的 PostToolUse Hook</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 从 stdin 读取 JSON 输入</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">INPUT=$(cat)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">TOOL_NAME=$(echo &quot;$INPUT&quot; | jq -r &#x27;.tool_name // &quot;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">FILE_PATH=$(echo &quot;$INPUT&quot; | jq -r &#x27;.tool_input.file_path // &quot;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 只在文件写入操作后触发（matcher 也可以在配置中过滤）</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">if [[ &quot;$TOOL_NAME&quot; != &quot;Write&quot; &amp;&amp; &quot;$TOOL_NAME&quot; != &quot;Edit&quot; &amp;&amp; &quot;$TOOL_NAME&quot; != &quot;MultiEdit&quot; ]]; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  exit 0</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 检查文件是否存在</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">if [[ -z &quot;$FILE_PATH&quot; || ! -f &quot;$FILE_PATH&quot; ]]; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  exit 0</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 根据文件类型选择格式化工具</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">case &quot;${FILE_PATH##*.}&quot; in</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  js|jsx|ts|tsx)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    if command -v prettier &amp;&gt;/dev/null; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      prettier --write &quot;$FILE_PATH&quot; --quiet</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      echo &quot;✓ Prettier 已格式化: $FILE_PATH&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    ;;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  py)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    if command -v black &amp;&gt;/dev/null; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      black &quot;$FILE_PATH&quot; --quiet</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      echo &quot;✓ Black 已格式化: $FILE_PATH&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    if command -v isort &amp;&gt;/dev/null; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      isort &quot;$FILE_PATH&quot; --quiet</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    ;;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  go)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    if command -v gofmt &amp;&gt;/dev/null; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      gofmt -w &quot;$FILE_PATH&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      echo &quot;✓ gofmt 已格式化: $FILE_PATH&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    ;;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  rs)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    if command -v rustfmt &amp;&gt;/dev/null; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      rustfmt &quot;$FILE_PATH&quot; --quiet 2&gt;/dev/null</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      echo &quot;✓ rustfmt 已格式化: $FILE_PATH&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    ;;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  json)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    if command -v jq &amp;&gt;/dev/null; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      tmp=$(mktemp)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      jq &#x27;.&#x27; &quot;$FILE_PATH&quot; &gt; &quot;$tmp&quot; &amp;&amp; mv &quot;$tmp&quot; &quot;$FILE_PATH&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      echo &quot;✓ jq 已格式化: $FILE_PATH&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    ;;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">esac</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">exit 0</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="示例三提示词内容审计userpromptsubmit-hook">示例三：提示词内容审计（UserPromptSubmit Hook）<a href="#示例三提示词内容审计userpromptsubmit-hook" class="hash-link" aria-label="示例三：提示词内容审计（UserPromptSubmit Hook）的直接链接" title="示例三：提示词内容审计（UserPromptSubmit Hook）的直接链接" translate="no">​</a></h3>
<p>记录所有用户提示词到审计日志：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># prompt-audit.sh - 记录用户提示词的 UserPromptSubmit Hook</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 从 stdin 读取 JSON 输入</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">INPUT=$(cat)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">PROMPT=$(echo &quot;$INPUT&quot; | jq -r &#x27;.prompt // &quot;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">TIMESTAMP=$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">LOG_DIR=&quot;$HOME/.claude/logs&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">LOG_FILE=&quot;$LOG_DIR/prompt-audit.log&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 确保日志目录存在</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">mkdir -p &quot;$LOG_DIR&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 记录提示词（截断超长内容）</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">PROMPT_PREVIEW=$(echo &quot;$PROMPT&quot; | head -c 200)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">echo &quot;[$TIMESTAMP] PROMPT: $PROMPT_PREVIEW&quot; &gt;&gt; &quot;$LOG_FILE&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">exit 0</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="hook-脚本最佳实践">Hook 脚本最佳实践<a href="#hook-脚本最佳实践" class="hash-link" aria-label="Hook 脚本最佳实践的直接链接" title="Hook 脚本最佳实践的直接链接" translate="no">​</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>开发建议</div><div class="admonitionContent_BuS1"><ol>
<li class=""><strong>始终设置超时</strong>：避免 Hook 脚本卡死导致 Claude Code 无响应</li>
<li class=""><strong>幂等性设计</strong>：Hook 可能被重复调用，脚本应能安全地重复执行</li>
<li class=""><strong>详细的错误输出</strong>：错误信息会显示给用户，应清晰说明问题</li>
<li class=""><strong>使用绝对路径</strong>：Hook 脚本中的命令使用完整路径，避免 PATH 问题</li>
<li class=""><strong>日志记录</strong>：将重要事件记录到文件，方便事后审查</li>
</ol></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>性能注意</div><div class="admonitionContent_BuS1"><p>Hook 脚本在主流程中同步执行，耗时较长的脚本会影响 Claude Code 的响应速度。建议：</p><ul>
<li class="">将耗时操作改为异步（后台执行）</li>
<li class="">合理设置 <code>timeout</code> 值</li>
<li class="">避免在 Hook 中进行网络请求（除非必要）</li>
</ul></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="stdin-json-字段速查">stdin JSON 字段速查<a href="#stdin-json-字段速查" class="hash-link" aria-label="stdin JSON 字段速查的直接链接" title="stdin JSON 字段速查的直接链接" translate="no">​</a></h2>
<p>Hook 脚本通过 stdin 接收 JSON 数据。各事件的完整字段如下：</p>































































































<table><thead><tr><th>事件</th><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>UserPromptSubmit</code></td><td><code>prompt</code></td><td>string</td><td>用户输入的提示词内容</td></tr><tr><td><code>UserPromptSubmit</code></td><td><code>session_id</code></td><td>string</td><td>当前会话 ID</td></tr><tr><td><code>PreToolUse</code></td><td><code>tool_name</code></td><td>string</td><td>即将调用的工具名称（如 <code>Bash</code>、<code>Write</code>）</td></tr><tr><td><code>PreToolUse</code></td><td><code>tool_input</code></td><td>object</td><td>工具的输入参数（结构因工具而异）</td></tr><tr><td><code>PreToolUse</code></td><td><code>session_id</code></td><td>string</td><td>当前会话 ID</td></tr><tr><td><code>PostToolUse</code></td><td><code>tool_name</code></td><td>string</td><td>已完成调用的工具名称</td></tr><tr><td><code>PostToolUse</code></td><td><code>tool_input</code></td><td>object</td><td>工具的输入参数</td></tr><tr><td><code>PostToolUse</code></td><td><code>tool_response</code></td><td>object</td><td>工具的执行结果</td></tr><tr><td><code>PostToolUse</code></td><td><code>session_id</code></td><td>string</td><td>当前会话 ID</td></tr><tr><td><code>Stop</code></td><td><code>stop_reason</code></td><td>string</td><td>停止原因（如 <code>end_turn</code>）</td></tr><tr><td><code>Stop</code></td><td><code>session_id</code></td><td>string</td><td>当前会话 ID</td></tr><tr><td><code>SessionStart</code></td><td><code>session_id</code></td><td>string</td><td>当前会话 ID</td></tr><tr><td><code>SessionStart</code></td><td><code>cwd</code></td><td>string</td><td>当前工作目录路径</td></tr><tr><td><code>Notification</code></td><td><code>message</code></td><td>string</td><td>通知内容文本</td></tr></tbody></table>
<p>读取字段的标准写法：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">INPUT=$(cat)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 用 // &quot;&quot; 提供默认值，避免字段缺失时报错</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">TOOL_NAME=$(echo &quot;$INPUT&quot; | jq -r &#x27;.tool_name // &quot;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">FILE_PATH=$(echo &quot;$INPUT&quot; | jq -r &#x27;.tool_input.file_path // &quot;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">SESSION_ID=$(echo &quot;$INPUT&quot; | jq -r &#x27;.session_id // &quot;&quot;&#x27;)</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-实战案例hooks-如何提升工作效率">🎯 实战案例：Hooks 如何提升工作效率<a href="#-实战案例hooks-如何提升工作效率" class="hash-link" aria-label="🎯 实战案例：Hooks 如何提升工作效率的直接链接" title="🎯 实战案例：Hooks 如何提升工作效率的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="案例-1代码自动格式化--质量检查">案例 1：代码自动格式化 + 质量检查<a href="#案例-1代码自动格式化--质量检查" class="hash-link" aria-label="案例 1：代码自动格式化 + 质量检查的直接链接" title="案例 1：代码自动格式化 + 质量检查的直接链接" translate="no">​</a></h3>
<p><strong>场景：</strong> 团队成员经常提交格式不统一的代码，代码审查中 30% 的时间浪费在风格问题上。</p>
<p><strong>传统方式：</strong></p>
<ul>
<li class="">Claude Code 生成代码 → 手动运行格式化工具 → 手动运行 linter → 提交</li>
<li class="">每次修改需要 5-10 分钟的手动步骤</li>
</ul>
<p><strong>使用 Hooks：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 配置 PostToolUse Hook 自动格式化</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">PostToolUse → Write/Edit/MultiEdit 操作</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">自动运行 Prettier（格式化）</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">自动运行 ESLint（代码质量）</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">自动运行 TypeScript 检查</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">输出格式统一 + 质量达标的代码</span><br></span></code></pre></div></div>
<p><strong>效果对比：</strong></p>

























<table><thead><tr><th>指标</th><th>传统方式</th><th>使用 Hooks</th></tr></thead><tbody><tr><td>单次代码修改的手动步骤</td><td>5-10 分钟</td><td>0 分钟（自动）</td></tr><tr><td>代码审查中的风格问题</td><td>30%</td><td>0%</td></tr><tr><td>每周节省时间</td><td>—</td><td>10-15 小时</td></tr></tbody></table>
<p><strong>年度效益：</strong> <strong>节省 500+ 小时</strong>开发时间</p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="案例-2提交前自动运行测试">案例 2：提交前自动运行测试<a href="#案例-2提交前自动运行测试" class="hash-link" aria-label="案例 2：提交前自动运行测试的直接链接" title="案例 2：提交前自动运行测试的直接链接" translate="no">​</a></h3>
<p><strong>场景：</strong> 开发者经常忘记在提交前运行测试，导致主分支 CI 失败，浪费 20 分钟 debug 时间。</p>
<p><strong>传统方式：</strong></p>
<ul>
<li class="">手动运行 <code>npm test</code> → 等待结果 → 修复问题 → 再次提交</li>
<li class="">平均每个团队成员每周遇到 3-4 次 CI 失败</li>
</ul>
<p><strong>使用 Hooks：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 配置 PreToolUse Hook，在 Bash 命令中检测 git push</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">if &quot;git push&quot; detected:</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">自动运行完整测试套件</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">测试失败 → 阻止提交，显示错误</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">测试通过 → 允许提交继续</span><br></span></code></pre></div></div>
<p><strong>Hook 脚本示例：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">INPUT=$(cat)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">COMMAND=$(echo &quot;$INPUT&quot; | jq -r &#x27;.tool_input.command // &quot;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 检测是否是 git push 命令</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">if echo &quot;$COMMAND&quot; | grep -q &quot;git push&quot;; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  echo &quot;📋 提交前检查：自动运行测试...&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  # 运行测试</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  if npm test; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    exit 0  # 测试通过，允许 push</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    echo &quot;❌ 测试失败，已阻止提交。请修复后重试。&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    exit 1  # 阻止 push</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">exit 0</span><br></span></code></pre></div></div>
<p><strong>效果对比：</strong></p>

























<table><thead><tr><th>指标</th><th>传统方式</th><th>使用 Hooks</th></tr></thead><tbody><tr><td>周 CI 失败次数</td><td>3-4 次</td><td>0 次</td></tr><tr><td>每次 CI 失败的修复时间</td><td>20 分钟</td><td>—</td></tr><tr><td>每个月节省时间</td><td>—</td><td>4-6 小时</td></tr></tbody></table>
<p><strong>年度效益：</strong> <strong>节省 48-72 小时</strong>，且零 CI 失败</p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="案例-3审计和合规性记录">案例 3：审计和合规性记录<a href="#案例-3审计和合规性记录" class="hash-link" aria-label="案例 3：审计和合规性记录的直接链接" title="案例 3：审计和合规性记录的直接链接" translate="no">​</a></h3>
<p><strong>场景：</strong> 企业级应用需要追踪所有 AI 操作的审计日志（合规要求）。</p>
<p><strong>传统方式：</strong></p>
<ul>
<li class="">手动记录日志 → 管理日志文件 → 审查和分析</li>
<li class="">每月审计工作 4-6 小时</li>
</ul>
<p><strong>使用 Hooks：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 配置多个 Hook 自动记录审计日志</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">UserPromptSubmit → 记录用户提示词</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">PostToolUse → 记录所有文件修改</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">PreToolUse → 记录危险命令尝试</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  ↓</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">自动生成日志文件</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">日志包含：时间戳、操作者、操作类型、文件路径、修改内容哈希</span><br></span></code></pre></div></div>
<p><strong>自动化审计日志示例：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># audit-hook.sh - 审计日志记录</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">INPUT=$(cat)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">TOOL_NAME=$(echo &quot;$INPUT&quot; | jq -r &#x27;.tool_name // &quot;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">TIMESTAMP=$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">USER=$(whoami)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">LOG_FILE=&quot;$HOME/.claude/audit.log&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">mkdir -p &quot;$(dirname &quot;$LOG_FILE&quot;)&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 记录操作</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">echo &quot;[$TIMESTAMP] USER=$USER TOOL=$TOOL_NAME COMMAND=$INPUT&quot; &gt;&gt; &quot;$LOG_FILE&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 定期汇总（每 100 条记录生成报告）</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">if [ $(wc -l &lt; &quot;$LOG_FILE&quot;) -gt 100 ]; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  echo &quot;[$(date)] 生成月度审计报告...&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  cp &quot;$LOG_FILE&quot; &quot;$LOG_FILE.$(date +%Y%m%d).bak&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  : &gt; &quot;$LOG_FILE&quot;  # 清空当前日志</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">exit 0</span><br></span></code></pre></div></div>
<p><strong>效果对比：</strong></p>






























<table><thead><tr><th>指标</th><th>传统方式</th><th>使用 Hooks</th></tr></thead><tbody><tr><td>审计日志记录</td><td>手动</td><td>全自动</td></tr><tr><td>审计覆盖率</td><td>70%</td><td>100%</td></tr><tr><td>月度审计工作</td><td>4-6 小时</td><td>0 小时（自动生成报告）</td></tr><tr><td>日志准确性</td><td>中等</td><td>完美</td></tr></tbody></table>
<p><strong>年度效益：</strong> <strong>节省 48-72 小时</strong>，且提升合规性</p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="案例-4跨团队协作通知">案例 4：跨团队协作通知<a href="#案例-4跨团队协作通知" class="hash-link" aria-label="案例 4：跨团队协作通知的直接链接" title="案例 4：跨团队协作通知的直接链接" translate="no">​</a></h3>
<p><strong>场景：</strong> 大型团队分布在不同模块，某个重要文件修改需要及时通知相关人员。</p>
<p><strong>传统方式：</strong></p>
<ul>
<li class="">Claude Code 修改文件后，手动在 Slack 通知相关人员</li>
<li class="">容易遗漏、延迟通知</li>
</ul>
<p><strong>使用 Hooks：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 配置 PostToolUse Hook，在关键文件修改后自动发送通知</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">PostToolUse → Edit/Write 操作:</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  if 文件在监视列表中:</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    ↓</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  发送 Slack 通知</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  包含：修改者、文件路径、修改摘要、Git diff 链接</span><br></span></code></pre></div></div>
<p><strong>Hook 脚本：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">INPUT=$(cat)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">FILE_PATH=$(echo &quot;$INPUT&quot; | jq -r &#x27;.tool_input.file_path // &quot;&quot;&#x27;)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 监视的关键文件</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">WATCH_FILES=(</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  &quot;src/auth/*&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  &quot;src/database/schema.sql&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  &quot;package.json&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  &quot;docker-compose.yml&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 检查文件是否在监视列表中</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">for pattern in &quot;${WATCH_FILES[@]}&quot;; do</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  if [[ &quot;$FILE_PATH&quot; == $pattern ]]; then</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    # 发送 Slack 通知</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    curl -X POST &quot;$SLACK_WEBHOOK&quot; \</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      -H &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      -d &quot;{</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        \&quot;text\&quot;: \&quot;⚠️ 关键文件已修改: $FILE_PATH\&quot;,</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">        \&quot;channel\&quot;: \&quot;#dev-alerts\&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">      }&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">    break</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">done</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">exit 0</span><br></span></code></pre></div></div>
<p><strong>效果对比：</strong></p>

























<table><thead><tr><th>指标</th><th>传统方式</th><th>使用 Hooks</th></tr></thead><tbody><tr><td>通知延迟</td><td>5-30 分钟</td><td>实时（&lt;1 秒）</td></tr><tr><td>通知完整性</td><td>70%</td><td>100%</td></tr><tr><td>人工操作</td><td>每次通知都需要</td><td>零</td></tr></tbody></table>
<p><strong>年度效益：</strong> <strong>提升协作效率</strong>，减少沟通成本</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-hooks-使用建议">💡 Hooks 使用建议<a href="#-hooks-使用建议" class="hash-link" aria-label="💡 Hooks 使用建议的直接链接" title="💡 Hooks 使用建议的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="最适合的场景">最适合的场景<a href="#最适合的场景" class="hash-link" aria-label="最适合的场景的直接链接" title="最适合的场景的直接链接" translate="no">​</a></h3>
<p>✅ <strong>代码质量自动化</strong></p>
<ul>
<li class="">自动格式化、linting、测试</li>
<li class="">可节省 <strong>20-30% 的代码审查时间</strong></li>
</ul>
<p>✅ <strong>安全和合规</strong></p>
<ul>
<li class="">危险命令拦截</li>
<li class="">审计日志记录</li>
<li class="">关键文件访问控制</li>
</ul>
<p>✅ <strong>工作流自动化</strong></p>
<ul>
<li class="">提交前检查</li>
<li class="">自动生成报告</li>
<li class="">团队通知</li>
</ul>
<p>✅ <strong>性能优化</strong></p>
<ul>
<li class="">自动清理临时文件</li>
<li class="">缓存管理</li>
<li class="">资源监控</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="性能注意">性能注意<a href="#性能注意" class="hash-link" aria-label="性能注意的直接链接" title="性能注意的直接链接" translate="no">​</a></h3>
<p>⚠️ Hook 脚本在主流程中同步执行</p>
<ul>
<li class="">避免超过 10 秒的操作</li>
<li class="">对于耗时任务，使用 <code>timeout</code> 和后台执行</li>
<li class="">定期监控 Hook 执行时间</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="调试-hooks">调试 Hooks<a href="#调试-hooks" class="hash-link" aria-label="调试 Hooks的直接链接" title="调试 Hooks的直接链接" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 查看 Hook 执行日志</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">tail -f ~/.claude/logs/hook-debug.log</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain"># 临时禁用 Hooks（用于故障排除）</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">export CLAUDE_DISABLE_HOOKS=1</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">claude</span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/claude-doc/docs/core-concepts/skills"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Skills（技能包）</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/claude-doc/docs/core-concepts/plugins"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Plugins（插件）</div></a></nav></div></div><div class="col col--3"><div class="tocWrapper_xKoj"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#什么是-hooks" class="table-of-contents__link toc-highlight">什么是 Hooks</a></li><li><a href="#hook-事件类型" class="table-of-contents__link toc-highlight">Hook 事件类型</a></li><li><a href="#配置方式" class="table-of-contents__link toc-highlight">配置方式</a><ul><li><a href="#方式一通过命令配置" class="table-of-contents__link toc-highlight">方式一：通过命令配置</a></li><li><a href="#方式二直接编辑配置文件" class="table-of-contents__link toc-highlight">方式二：直接编辑配置文件</a></li></ul></li><li><a href="#实战示例" class="table-of-contents__link toc-highlight">实战示例</a><ul><li><a href="#示例一拦截危险命令" class="table-of-contents__link toc-highlight">示例一：拦截危险命令</a></li><li><a href="#示例二自动格式化代码posttooluse-hook" class="table-of-contents__link toc-highlight">示例二：自动格式化代码（PostToolUse Hook）</a></li><li><a href="#示例三提示词内容审计userpromptsubmit-hook" class="table-of-contents__link toc-highlight">示例三：提示词内容审计（UserPromptSubmit Hook）</a></li></ul></li><li><a href="#hook-脚本最佳实践" class="table-of-contents__link toc-highlight">Hook 脚本最佳实践</a></li><li><a href="#stdin-json-字段速查" class="table-of-contents__link toc-highlight">stdin JSON 字段速查</a></li><li><a href="#-实战案例hooks-如何提升工作效率" class="table-of-contents__link toc-highlight">🎯 实战案例：Hooks 如何提升工作效率</a><ul><li><a href="#案例-1代码自动格式化--质量检查" class="table-of-contents__link toc-highlight">案例 1：代码自动格式化 + 质量检查</a></li><li><a href="#案例-2提交前自动运行测试" class="table-of-contents__link toc-highlight">案例 2：提交前自动运行测试</a></li><li><a href="#案例-3审计和合规性记录" class="table-of-contents__link toc-highlight">案例 3：审计和合规性记录</a></li><li><a href="#案例-4跨团队协作通知" class="table-of-contents__link toc-highlight">案例 4：跨团队协作通知</a></li></ul></li><li><a href="#-hooks-使用建议" class="table-of-contents__link toc-highlight">💡 Hooks 使用建议</a><ul><li><a href="#最适合的场景" class="table-of-contents__link toc-highlight">最适合的场景</a></li><li><a href="#性能注意" class="table-of-contents__link toc-highlight">性能注意</a></li><li><a href="#调试-hooks" class="table-of-contents__link toc-highlight">调试 Hooks</a></li></ul></li></ul></div><div class="tocFooter_Fu2z"><div class="themeGroup_RzWV" role="group" aria-label="Theme"><button class="themeBtn_tGr6" aria-label="Light theme" title="Light"><svg viewBox="0 0 24 24" width="15" height="15" fill="currentColor" aria-hidden="true"><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg></button><button class="themeBtn_tGr6 themeBtnActive_A6tm" aria-label="Dark theme" title="Dark"><svg viewBox="0 0 24 24" width="15" height="15" fill="currentColor" aria-hidden="true"><path d="M11.38 2.019a7.5 7.5 0 1 0 10.6 10.6C21.83 17.963 17.315 22 12.002 22 6.477 22 2 17.523 2 12c0-5.314 4.038-9.827 9.38-10.28z"></path></svg></button></div></div></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Claude Docs.</div></div></div></footer></div>
</body>
</html>